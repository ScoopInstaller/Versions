{
    "version": "5.10-DEVELOPMENT-SNAPSHOT-2024-02-27",
    "homepage": "https://www.swift.org/",
    "description": "A general-purpose programming language built using a modern approach to safety, performance, and software design patterns.",
    "license": "Apache-2.0",
    "suggest": {
        "python": "main/python",
        "vcredist": "extras/vcredist2022"
    },
    "notes": [
        "To make Swift toolchain work, you must have Visual Studio and Windows SDK components installed.",
        "Read https://www.swift.org/getting-started/#support-files for Supporting Files installation guide."
    ],
    "architecture": {
        "64bit": {
            "url": "https://download.swift.org/swift-5.10-branch/windows10/swift-5.10-DEVELOPMENT-SNAPSHOT-2024-02-27-a/swift-5.10-DEVELOPMENT-SNAPSHOT-2024-02-27-a-windows10.exe#/swiftsetup.exe",
            "hash": "6b23c7c28ce3ec0a952a74e8d7983eab9399ad74e69c2872548e4c793ec4fa97"
        }
    },
    "pre_install": [
        "Expand-DarkArchive \"$dir\\swiftsetup.exe\" \"$dir\\extract_folder\" -Removal",
        "Get-ChildItem \"$dir\\extract_folder\\AttachedContainer\\a*\" | ForEach-Object {",
        "    Expand-MsiArchive $_ \"$dir\\extract_folder\"",
        "}",
        "Move-Item \"$dir\\extract_folder\\PFiles64\\Swift\" -Destination \"$dir\"",
        "Move-Item \"$dir\\extract_folder\\Library\\Developer\" -Destination \"$dir\"",
        "Remove-Item \"$dir\\extract_folder\" -Recurse | Out-Null"
    ],
    "env_add_path": [
        "Developer\\Toolchains\\unknown-Asserts-development.xctoolchain\\usr\\bin",
        "Swift\\runtime-development\\usr\\bin"
    ],
    "env_set": {
        "SDKROOT": "$dir\\Developer\\Platforms\\Windows.platform\\Developer\\SDKs\\Windows.sdk",
        "DEVELOPER_DIR": "$dir\\Developer"
    },
    "bin": "Swift\\runtime-development\\usr\\bin\\plutil.exe",
    "checkver": {
        "script": [
            "$page_res = Invoke-WebRequest -Uri https://www.swift.org/download/",
            "$links = $page_res.Links | Select-Object -ExpandProperty href",
            "$res = $links | Where-Object { $_ -match 'swift-5\\.10-.+-(\\d{4}-\\d{2}-\\d{2})-a-windows10\\.exe' }",
            "$res[0] | Split-Path -Leaf | Select-Object -Last 1"
        ],
        "regex": "(5\\.10-.+-\\d{4}-\\d{2}-\\d{2})"
    },
    "autoupdate": {
        "architecture": {
            "64bit": {
                "url": "https://download.swift.org/swift-5.10-branch/windows10/swift-$version-a/swift-$version-a-windows10.exe#/swiftsetup.exe"
            }
        }
    }
}
